/*! For license information please see 471.95991d63f966deff2c1e.hot-update.js.LICENSE.txt */
self.webpackHotUpdatereeval_screenity(471,{8293:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof b?e:b,a=Object.create(o.prototype),c=new I(n||[]);return i(a,"_invoke",{value:S(t,r,c)}),a}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function b(){}function w(){}function x(){}var E={};f(E,u,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&a.call(L,u)&&(E=L);var _=x.prototype=b.prototype=Object.create(E);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,i,c,u){var s=p(t[o],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;i(this,"_invoke",{value:function(t,n){function a(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(a,a):a()}})}function S(e,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?y:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(a.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(n(e)+" is not iterable")}return w.prototype=x,i(_,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},O(T.prototype),f(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new T(h(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(_),f(_,l,"Generator"),f(_,u,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function a(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}const i=function(){var t,e=(t=o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,chrome.identity.getAuthToken({interactive:!0});case 3:if(e=t.sent){t.next=6;break}throw new Error("User cancelled sign-in or failed to get token");case 6:return t.next=8,new Promise((function(t){return chrome.storage.local.set({token:e.token},(function(){return t()}))}));case 8:return t.next=10,chrome.identity.getProfileUserInfo();case 10:return t.sent,t.abrupt("return",e.token);case 14:return t.prev=14,t.t0=t.catch(0),console.error("Error signing in:",t.t0.message),t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,null,[[0,14]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function c(t){a(i,n,o,c,u,"next",t)}function u(t){a(i,n,o,c,u,"throw",t)}c(void 0)}))});return function(){return e.apply(this,arguments)}}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new I(n||[]);return o(i,"_invoke",{value:S(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",v="suspendedYield",m="executing",y="completed",g={};function b(){}function w(){}function x(){}var E={};f(E,i,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,i)&&(E=L);var _=x.prototype=b.prototype=Object.create(E);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,a,i,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,i,u)}),(function(t){r("throw",t,i,u)})):e.resolve(f).then((function(t){l.value=t,i(l)}),(function(t){return r("throw",t,i,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?y:v,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(c(e)+" is not iterable")}return w.prototype=x,o(_,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=f(x,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,l,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},O(T.prototype),f(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new T(h(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(_),f(_,l,"Generator"),f(_,i,(function(){return this})),f(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function s(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){s(a,n,o,i,c,"next",t)}function c(t){s(a,n,o,i,c,"throw",t)}i(void 0)}))}}const f=function(){var t=l(u().mark((function t(e,r,n){var o,a;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){return a=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){chrome.storage.local.get(["token"],function(){var r=l(u().mark((function r(n){var o,a,c,s;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!chrome.runtime.lastError){r.next=4;break}e(new Error(chrome.runtime.lastError)),r.next=24;break;case 4:if((o=n.token)&&null!==o){r.next=13;break}return r.next=8,i();case 8:(a=r.sent)&&null!==a||e(new Error("Sign-in failed")),t(a),r.next=24;break;case 13:r.prev=13,c=JSON.parse(atob(o.split(".")[1])),r.next=21;break;case 17:return r.prev=17,r.t0=r.catch(13),chrome.identity.getAuthToken({interactive:!0},(function(r){chrome.runtime.lastError?e(new Error(chrome.runtime.lastError)):t(r)})),r.abrupt("return");case 21:s=1e3*c.exp,Date.now()>=s?chrome.identity.getAuthToken({interactive:!0},(function(r){chrome.runtime.lastError?e(new Error(chrome.runtime.lastError)):t(r)})):t(o);case 24:case"end":return r.stop()}}),r,null,[[13,17]])})));return function(t){return r.apply(this,arguments)}}())})));case 1:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)},o=function(){return a.apply(this,arguments)},t.abrupt("return",new Promise(function(){var t=l(u().mark((function t(a,i){var c,s,l,f,h,p,d,v;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o();case 3:if((c=t.sent)&&null!==c){t.next=6;break}throw new Error("Sign-in failed");case 6:return s=new Headers({Authorization:"Bearer ".concat(c),"Content-Type":e.type}),t.next=9,fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=media",{method:"POST",headers:s,body:e});case 9:if((l=t.sent).ok){t.next=12;break}throw new Error("Error uploading to Google Drive: ".concat(l.status));case 12:return t.next=14,l.json();case 14:if(f=t.sent,h=f.id){t.next=18;break}throw new Error("File ID is undefined");case 18:return p={name:r},t.next=21,fetch("https://www.googleapis.com/drive/v3/files/".concat(h),{method:"PATCH",headers:new Headers({Authorization:"Bearer ".concat(c),"Content-Type":"application/json; charset=UTF-8"}),body:JSON.stringify(p)});case 21:if((d=t.sent).ok){t.next=28;break}return t.next=25,d.json();case 25:throw v=t.sent,console.error("Error updating file metadata:",d.status,v.error.message),new Error("Error updating file metadata: ".concat(d.status));case 28:n({status:"ok",url:h}),chrome.tabs.create({url:"https://drive.google.com/file/d/".concat(h,"/view")}),a("https://drive.google.com/file/d/".concat(h,"/view")),t.next=38;break;case 33:t.prev=33,t.t0=t.catch(0),console.error("Error uploading to Google Drive:",t.t0.message),n({status:"ew",url:null}),i(t.t0);case 38:case"end":return t.stop()}}),t,null,[[0,33]])})));return function(e,r){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){var n,o,a,i;n=t,o=e,a=r[e],i=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==h(i)?i:i+"")in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(){m=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new I(n||[]);return o(i,"_invoke",{value:S(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function x(){}var E={};s(E,i,(function(){return this}));var k=Object.getPrototypeOf,L=k&&k(k(R([])));L&&L!==r&&n.call(L,i)&&(E=L);var _=x.prototype=b.prototype=Object.create(E);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==h(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var o=p;return function(a,i){if(o===v)throw Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(h(e)+" is not iterable")}return w.prototype=x,o(_,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:w,configurable:!0}),w.displayName=s(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,s(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},O(T.prototype),s(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new T(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(_),s(_,u,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},e}function y(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){y(a,n,o,i,c,"next",t)}function c(t){y(a,n,o,i,c,"throw",t)}i(void 0)}))}}var b=function(){var t=g(m().mark((function t(e,r){var n,o,a,i=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>2&&void 0!==i[2]?i[2]:null,o=i.length>3&&void 0!==i[3]?i[3]:null,null!==e&&null!==r){t.next=4;break}return t.abrupt("return",Promise.reject(new Error("Tab ID or message is null")));case 4:return t.prev=4,t.next=7,new Promise((function(t,r){chrome.tabs.get(e,(function(e){chrome.runtime.lastError?r(chrome.runtime.lastError.message):t(e)}))}));case 7:if((a=t.sent)&&a.url&&!a.url.startsWith("chrome://")&&!a.url.startsWith("chromewebstore.google.com")&&!a.url.startsWith("chrome.google.com/webstore")&&""!==a.url&&"about:blank"!==a.url){t.next=10;break}return t.abrupt("return");case 10:return t.abrupt("return",new Promise((function(t,e){chrome.tabs.sendMessage(a.id,r,(function(r){chrome.runtime.lastError?e(chrome.runtime.lastError.message):n?n(r):t(r)}))})));case 13:return t.prev=13,t.t0=t.catch(4),console.error("Error sending message to tab:",t.t0),o&&"function"==typeof o&&o(),t.abrupt("return",Promise.reject(t.t0));case 18:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,r){return t.apply(this,arguments)}}(),w=function(){var t=g(m().mark((function t(e){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,new Promise((function(t){chrome.tabs.get(e,(function(e){t(e)}))}));case 5:(r=t.sent)&&r.id&&chrome.windows.update(r.windowId,{focused:!0}).then((function(){chrome.tabs.update(r.id,{active:!0})})),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=g(m().mark((function t(e){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,new Promise((function(t){chrome.tabs.get(e,(function(e){t(e)}))}));case 5:(r=t.sent)&&r.id&&chrome.tabs.remove(r.id),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(2);case 11:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=g(m().mark((function t(){var e,r,n,o,a=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=v({active:!0,lastFocusedWindow:!0},a.length>0&&void 0!==a[0]?a[0]:{}),t.next=4,chrome.tabs.query(e);case 4:return r=t.sent,c=1,n=function(t){if(Array.isArray(t))return t}(i=r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(i,c)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(i,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],t.abrupt("return",o);case 8:case"end":return t.stop()}var i,c}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=g(m().mark((function t(e){var r,n,o,a,i=arguments;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]&&i[1],n=i.length>2&&void 0!==i[2]&&i[2],e){t.next=4;break}return t.abrupt("return");case 4:r&&((a=chrome.i18n.getMessage("@@ui_locale")).includes("en")||(o="http://translate.google.com/translate?js=n&sl=auto&tl="+a+"&u="+e)),o&&chrome.tabs.create({url:o,active:n});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=r(3790),_=r.n(L);const O="object"==typeof global&&global&&global.Object===Object&&global;var T="object"==typeof self&&self&&self.Object===Object&&self;const S=O||T||Function("return this")(),j=S.Symbol;var A=Object.prototype,P=A.hasOwnProperty,I=A.toString,R=j?j.toStringTag:void 0;var N=Object.prototype.toString;var D=j?j.toStringTag:void 0;const G=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":D&&D in Object(t)?function(t){var e=P.call(t,R),r=t[R];try{t[R]=void 0;var n=!0}catch(t){}var o=I.call(t);return n&&(e?t[R]=r:delete t[R]),o}(t):function(t){return N.call(t)}(t)},C=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},U=S["__core-js_shared__"];var F,M=(F=/[^.]+$/.exec(U&&U.keys&&U.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";var V=Function.prototype.toString;var W=/^\[object .+?Constructor\]$/,B=Function.prototype,q=Object.prototype,Y=B.toString,z=q.hasOwnProperty,X=RegExp("^"+Y.call(z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const J=function(t){return!(!C(t)||function(t){return!!M&&M in t}(t))&&(function(t){if(!C(t))return!1;var e=G(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}(t)?X:W).test(function(t){if(null!=t){try{return V.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t))},$=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return J(r)?r:void 0},H=$(Object,"create");var K=Object.prototype.hasOwnProperty;var Z=Object.prototype.hasOwnProperty;function Q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Q.prototype.clear=function(){this.__data__=H?H(null):{},this.size=0},Q.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Q.prototype.get=function(t){var e=this.__data__;if(H){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return K.call(e,t)?e[t]:void 0},Q.prototype.has=function(t){var e=this.__data__;return H?void 0!==e[t]:Z.call(e,t)},Q.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=H&&void 0===e?"__lodash_hash_undefined__":e,this};const tt=Q,et=function(t,e){for(var r=t.length;r--;)if((n=t[r][0])===(o=e)||n!=n&&o!=o)return r;var n,o;return-1};var rt=Array.prototype.splice;function nt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}nt.prototype.clear=function(){this.__data__=[],this.size=0},nt.prototype.delete=function(t){var e=this.__data__,r=et(e,t);return!(r<0||(r==e.length-1?e.pop():rt.call(e,r,1),--this.size,0))},nt.prototype.get=function(t){var e=this.__data__,r=et(e,t);return r<0?void 0:e[r][1]},nt.prototype.has=function(t){return et(this.__data__,t)>-1},nt.prototype.set=function(t,e){var r=this.__data__,n=et(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const ot=nt,at=$(S,"Map"),it=function(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map};function ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ct.prototype.clear=function(){this.size=0,this.__data__={hash:new tt,map:new(at||ot),string:new tt}},ct.prototype.delete=function(t){var e=it(this,t).delete(t);return this.size-=e?1:0,e},ct.prototype.get=function(t){return it(this,t).get(t)},ct.prototype.has=function(t){return it(this,t).has(t)},ct.prototype.set=function(t,e){var r=it(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const ut=ct;function st(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ut;++e<r;)this.add(t[e])}st.prototype.add=st.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},st.prototype.has=function(t){return this.__data__.has(t)};const lt=st,ft=function(t){return t!=t},ht=function(t,e){return!(null==t||!t.length)&&function(t,e,r){return e==e?function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}(t,e,r):function(t,e,r,n){for(var o=t.length,a=r+(n?1:-1);n?a--:++a<o;)if(e(t[a],a,t))return a;return-1}(t,ft,r)}(t,e,0)>-1},pt=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1},dt=function(t,e){return t.has(e)},vt=$(S,"Set"),mt=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},yt=vt&&1/mt(new vt([,-0]))[1]==1/0?function(t){return new vt(t)}:function(){},gt=function(t){return t&&t.length?function(t,e,r){var n=-1,o=ht,a=t.length,i=!0,c=[],u=c;if(r)i=!1,o=pt;else if(a>=200){var s=e?null:yt(t);if(s)return mt(s);i=!1,o=dt,u=new lt}else u=e?[]:c;t:for(;++n<a;){var l=t[n],f=e?e(l):l;if(l=r||0!==l?l:0,i&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),c.push(l)}else o(u,f,r)||(u!==c&&u.push(f),c.push(l))}return c}(t):[]};function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function wt(t,e,r){var n;return n=function(t,e){if("object"!=bt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==bt(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xt="productions",Et="video_templates",kt="video_clips",Lt="voice_clips",_t="assets",Ot=(wt(wt(wt(wt(wt(wt(wt(wt(wt({},"pages","/pages"),"stories","/stories"),xt,"/productions"),Et,"/video_templates"),kt,"/video_clips"),Lt,"/voice_clips"),_t,"/assets"),"voice_names","/voice_names"),"font_names","/font_names"),wt(wt(wt(wt(wt({},xt,"production"),Et,"video_template"),kt,"video_clip"),Lt,"voice_clip"),_t,"asset"),{PRIMARY_COLOR:"#45b7f7",RESOURCE_BASE:"https://knitter.ai/videomaker",NOT_ADDED_REEVAL_COLOR:"#1677ff",ADDED_REEVAL_COLOR:"#f66b11",DURATION:5e3}),Tt="reeval.menu.add",St={PAGES:"reeval.storage.pages",PAGE_ACTION_BAR:"reeval.storage.page.action.bar",APP_TAB_ID:"reeval.storage.app.tab.id",INTERRUPT_RECORDING:"reeval.storage.recording.interrupt",PENDDING_SCREEN:"reeval.storage.recording.screen.pendding",REEVAL_STATE:"reeval.recording.state",REEVAL_WINDOW_ID:"reeval.recording.windowId"},jt={UPDATE_ACTION_COUNT:"reeval.msg.update.action.count",ADD_TO_REEVAL:"reeval.msg.add.to.reeval",ADDED_TO_REEVAL:"reeval.msg.added.to.reeval",IS_ADDED_REEVAL:"reeval.msg.is.added",APP_RELOAD:"reeval.msg.app.reload",CANCEL_RECORDING:"reeval.msg.cancel.recording",INTERRUPT_RECORDING:"reeval.msg.interrupt.recording",REEVAL_PENDDING_STATE:"reeval.storyboard.pendding.state",REEVAL_PENDDING_STORYBOARD:"reeval.storyboard.pendding.recording",REEVAL_RUN_STORYBOARD:"reeval.storyboard.run.recoding",REEVAL_RUN_SECTION:"reeval.storyboard.recoding.section"};function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Pt(t,e,r){var n;return n=function(t,e){if("object"!=At(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==At(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function It(){It=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==At(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(At(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Rt(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Nt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Rt(a,n,o,i,c,"next",t)}function c(t){Rt(a,n,o,i,c,"throw",t)}i(void 0)}))}}function Dt(t){return new Promise((function(e){setTimeout(e,t)}))}r(4353);var Gt,Ct,Ut,Ft={get:(Ut=Nt(It().mark((function t(e){var r,n;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(e);case 2:return r=t.sent,n=r[e],t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t){return Ut.apply(this,arguments)}),set:(Ct=Nt(It().mark((function t(e,r){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.set(Pt({},e,r));case 2:case"end":return t.stop()}}),t)}))),function(t,e){return Ct.apply(this,arguments)}),remove:(Gt=Nt(It().mark((function t(e){return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.remove(e);case 2:case"end":return t.stop()}}),t)}))),function(t){return Gt.apply(this,arguments)})};function Mt(t,e){var r=new URL(t);return r.searchParams.set("reeval",e),r.toString()}function Vt(t){var e=new URL(null!=t?t:window.location.href);return e.searchParams.delete("reeval"),e.toString()}function Wt(t){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wt(t)}function Bt(){Bt=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Wt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Wt(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function qt(t,e,r){var n;return n=function(t,e){if("object"!=Wt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==Wt(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Yt(t,e){if(t){if("string"==typeof t)return zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zt(t,e):void 0}}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xt(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Jt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Xt(a,n,o,i,c,"next",t)}function c(t){Xt(a,n,o,i,c,"throw",t)}i(void 0)}))}}chrome.action.onClicked.addListener(function(){var t=Jt(Bt().mark((function t(e){var r,n,o,a,i,c,u,s,l;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.id,r=e.windowId,n=chrome.runtime.getURL("reevalapp.html"),o=chrome.tabs,a=o.create,i=o.update,c=o.move,t.next=5,chrome.tabs.query({url:n});case 5:if(u=t.sent,h=1,s=function(t){if(Array.isArray(t))return t}(f=u)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(f,h)||Yt(f,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=s[0]){t.next=12;break}return t.next=11,a({url:n,windowId:r,index:0,active:!0,pinned:!0});case 11:l=t.sent;case 12:if(!l){t.next=19;break}if(t.t0=l.windowId!==r,!t.t0){t.next=17;break}return t.next=17,c(l.id,{windowId:r,index:0});case 17:return t.next=19,i(l.id,{highlighted:!0,active:!0,pinned:!0});case 19:return t.next=21,chrome.storage.local.set(qt({},St.APP_TAB_ID,l.id));case 21:case"end":return t.stop()}var f,h}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.runtime.onMessage.addListener(function(){var t=Jt(Bt().mark((function t(e){var r,n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.type,n=e.options,r!==jt.UPDATE_ACTION_COUNT){t.next=6;break}return t.next=4,chrome.action.setBadgeText({text:String(null==n?void 0:n.length)});case 4:return t.next=6,chrome.storage.local.set(qt({},St.PAGES,n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.tabs.onRemoved.addListener(function(){var t=Jt(Bt().mark((function t(e){var r,n,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=St.APP_TAB_ID,t.next=3,chrome.storage.local.get(r);case 3:if(n=t.sent,o=n[r],t.t0=e===o,!t.t0){t.next=9;break}return t.next=9,chrome.storage.local.remove(r);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var $t,Ht,Kt=function(){var t=Jt(Bt().mark((function t(e){var r,n,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(St.PAGES);case 2:return r=t.sent,n=r[St.PAGES],o=gt([].concat(function(t){if(Array.isArray(t))return zt(t)}(a=null!=n?n:[])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(a)||Yt(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[Vt(e)])),t.next=7,chrome.storage.local.set(qt({},St.PAGES,o));case 7:return t.next=9,chrome.action.setBadgeText({text:String(o.length)});case 9:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}(),Zt=function(){var t=Jt(Bt().mark((function t(e){var r,n,o,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,!t.t0){t.next=4;break}return t.next=4,Kt(e);case 4:return t.next=6,fetch("".concat(Ot.RESOURCE_BASE,"/pages"));case 6:return r=t.sent,t.next=9,r.json();case 9:if(n=t.sent,o=n.data,!(a=null==o?void 0:o.length)){t.next=19;break}return t.next=15,chrome.action.setBadgeText({text:String(a)});case 15:return t.next=17,chrome.action.setBadgeBackgroundColor({color:Ot.NOT_ADDED_REEVAL_COLOR});case 17:return t.next=19,chrome.storage.local.set(qt({},St.PAGES,o.map((function(t){return Vt(t.url)}))));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function Qt(t){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(t)}function te(){te=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Qt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Qt(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ee(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function re(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ee(a,n,o,i,c,"next",t)}function c(t){ee(a,n,o,i,c,"throw",t)}i(void 0)}))}}function ne(t){return oe.apply(this,arguments)}function oe(){return(oe=re(te().mark((function t(e){var r,n,o;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.url,t.next=3,chrome.storage.local.get(St.PAGES);case 3:if(t.sent[St.PAGES].includes(r)){t.next=24;break}return t.next=8,chrome.tabs.sendMessage(e.id,{type:jt.ADD_TO_REEVAL});case 8:return t.next=10,fetch(r).then((function(t){return t.text()}));case 10:return n=t.sent,t.next=13,fetch("".concat(Ot.RESOURCE_BASE,"/pages"),{method:"post",body:JSON.stringify({url:r,title:e.title,html_content:n})});case 13:return t.next=15,chrome.tabs.sendMessage(e.id,{type:jt.ADDED_TO_REEVAL});case 15:return t.next=17,Ft.get(St.APP_TAB_ID);case 17:if(o=t.sent,t.t0=o,!t.t0){t.next=22;break}return t.next=22,chrome.tabs.sendMessage(o,{type:jt.APP_RELOAD,options:Math.random()});case 22:return t.next=24,Zt(r);case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function ie(){ie=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ae(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(ae(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ce(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function ue(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){ce(a,n,o,i,c,"next",t)}function c(t){ce(a,n,o,i,c,"throw",t)}i(void 0)}))}}function se(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new le(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function le(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return le=function(t){this.s=t,this.n=t.next},le.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new le(t)}function fe(){return he.apply(this,arguments)}function he(){return he=ue(ie().mark((function t(){var e,r,n=arguments;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:chrome.windows.WindowState.NORMAL,t.next=3,chrome.windows.create({});case 3:return r=t.sent,chrome.windows.update(r.id,{state:null!=e?e:chrome.windows.WindowState.FULLSCREEN}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),he.apply(this,arguments)}function pe(t){return de.apply(this,arguments)}function de(){return(de=ue(ie().mark((function t(e){var r,n,o,a,i,c,u,s,l,f,h;return ie().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Dt(300);case 2:return t.next=4,chrome.tabs.query({windowId:e});case 4:r=t.sent,n=r.filter((function(t){var e=t.url,r=t.pendingUrl;return["","chrome://newtab/","chrome://newtab"].includes(e||r)})),o=!1,a=!1,t.prev=8,c=se(n);case 10:return t.next=12,c.next();case 12:if(!(o=!(u=t.sent).done)){t.next=33;break}return s=u.value,t.next=16,chrome.tabs.get(s.id);case 16:if(t.t1=l=t.sent,t.t0=null!==t.t1,!t.t0){t.next=20;break}t.t0=void 0!==l;case 20:if(!t.t0){t.next=24;break}t.t2=l,t.next=25;break;case 24:t.t2={};case 25:if(f=t.t2,!(h=f.id)){t.next=30;break}return t.next=30,chrome.tabs.remove(h);case 30:o=!1,t.next=10;break;case 33:t.next=39;break;case 35:t.prev=35,t.t3=t.catch(8),a=!0,i=t.t3;case 39:if(t.prev=39,t.prev=40,!o||null==c.return){t.next=44;break}return t.next=44,c.return();case 44:if(t.prev=44,!a){t.next=47;break}throw i;case 47:return t.finish(44);case 48:return t.finish(39);case 49:case"end":return t.stop()}}),t,null,[[8,35,39,49],[40,,44,48]])})))).apply(this,arguments)}function ve(t){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ve(t)}function me(){me=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ve(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(ve(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function ye(t,e,r){var n;return n=function(t,e){if("object"!=ve(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e),(e="symbol"==ve(n)?n:n+"")in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return be(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function we(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function xe(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){we(a,n,o,i,c,"next",t)}function c(t){we(a,n,o,i,c,"throw",t)}i(void 0)}))}}function Ee(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new ke(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function ke(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then((function(t){return{value:t,done:e}}))}return ke=function(t){this.s=t,this.n=t.next},ke.prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new ke(t)}function Le(t){return _e.apply(this,arguments)}function _e(){return _e=xe(me().mark((function t(e){var r,n,o,a,i,c,u,s,l,f;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=St.PENDDING_SCREEN,t.next=3,fe(chrome.windows.WindowState.MAXIMIZED);case 3:return n=t.sent,o=[],a=Object.entries(e).filter((function(t){var e,r=ge(t,2),n=(r[0],r[1]);return!(null==n||null===(e=n.screen_recording)||void 0===e||!e.url)})).length,t.next=8,chrome.storage.local.set(ye({},r,{run:!0,total:a,loaded:0}));case 8:i=!1,c=!1,t.prev=10,s=me().mark((function t(){var e,a,i,c,u,s,l;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=ge(f.value,2),a=e[0],i=e[1],u=null==i||null===(c=i.screen_recording)||void 0===c?void 0:c.url,i.inx=a,!u){t.next=11;break}return s=Mt(u,a),t.next=7,chrome.tabs.create({url:s,active:!a,windowId:n.id});case 7:l=t.sent,i.tabId=l.id,i.url=s,o.push(new Promise((function(t){chrome.tabs.onUpdated.addListener(function(){var e=xe(me().mark((function e(o,a){var i,c,u,s,f;return me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("complete"!==a.status||o!==l.id){e.next=12;break}return e.next=3,chrome.storage.local.get(r);case 3:return i=e.sent,c=i[r],u=c.total,s=c.loaded,f=c.run,e.next=10,chrome.storage.local.set(ye({},r,{run:f,total:u,loaded:s+1}));case 10:chrome.tabs.onUpdated.removeListener(n),t(!0);case 12:case"end":return e.stop()}}),e)})));function n(t,r){return e.apply(this,arguments)}return n}())})));case 11:case"end":return t.stop()}}),t)})),l=Ee(Object.entries(e));case 13:return t.next=15,l.next();case 15:if(!(i=!(f=t.sent).done)){t.next=20;break}return t.delegateYield(s(),"t0",17);case 17:i=!1,t.next=13;break;case 20:t.next=26;break;case 22:t.prev=22,t.t1=t.catch(10),c=!0,u=t.t1;case 26:if(t.prev=26,t.prev=27,!i||null==l.return){t.next=31;break}return t.next=31,l.return();case 31:if(t.prev=31,!c){t.next=34;break}throw u;case 34:return t.finish(31);case 35:return t.finish(26);case 36:return o.push(pe(n.id)),t.next=39,Promise.all(o);case 39:return t.next=41,chrome.storage.local.set(ye({},r,{run:!0,total:a,loaded:a}));case 41:return t.next=43,Dt(300);case 43:return t.next=45,chrome.storage.local.set(ye({},r,{run:!1}));case 45:return t.abrupt("return",{windowId:n.id});case 46:case"end":return t.stop()}}),t,null,[[10,22,26,36],[27,,31,35]])}))),_e.apply(this,arguments)}function Oe(t){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oe(t)}function Te(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=je(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return i=t.done,t},e:function(t){c=!0,a=t},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function Se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,a,i,c=[],u=!0,s=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}(t,e)||je(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(t,e){if(t){if("string"==typeof t)return Ae(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(t,e):void 0}}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pe(){Pe=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof y?e:y,i=Object.create(a.prototype),c=new A(n||[]);return o(i,"_invoke",{value:O(t,r,c)}),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",v="completed",m={};function y(){}function g(){}function b(){}var w={};s(w,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==r&&n.call(E,i)&&(w=E);var k=b.prototype=y.prototype=Object.create(w);function L(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function r(o,a,i,c){var u=f(t[o],t,a);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Oe(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,c)}),(function(t){r("throw",t,i,c)})):e.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return r("throw",t,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return a=a?a.then(o,o):o()}})}function O(e,r,n){var o=h;return function(a,i){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var u=T(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?v:p,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=v,n.method="throw",n.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(Oe(e)+" is not iterable")}return g.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},e.awrap=function(t){return{__await:t}},L(_.prototype),s(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new _(l(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},L(k),s(k,u,"Generator"),s(k,i,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),j(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function Ie(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function Re(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){Ie(a,n,o,i,c,"next",t)}function c(t){Ie(a,n,o,i,c,"throw",t)}i(void 0)}))}}($t=Zt,300,function(){var t=this,e=arguments;clearTimeout(Ht),Ht=setTimeout((function(){Ht=null,$t.apply(t,e)}),300)})(),chrome.runtime.onInstalled.addListener(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.contextMenus.create({id:Tt,title:"Add to ReEval",contexts:["all"],documentUrlPatterns:["http://*/*","https://*/*"]});case 1:case"end":return t.stop()}}),t)})))),function(t,e){var r=function(r,n,o){r.type===t&&(null==e||e(r.options,n,o))};chrome.runtime.onMessage.addListener(r)}(jt.IS_ADDED_REEVAL,function(){var t=re(te().mark((function t(e){var r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.added,e.url,chrome.contextMenus.update(Tt,{title:r?"Added ReEval":"Add to ReEval",enabled:!r});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.tabs.onActivated.addListener(function(){var t=re(te().mark((function t(e){var r,n,o,a,i,c;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.tabId,t.next=3,chrome.tabs.get(n);case 3:if((o=t.sent).url){t.next=6;break}return t.abrupt("return");case 6:return a=Vt(o.url),t.next=9,Ft.get(St.PAGES);case 9:if(i=t.sent,c=null==i||null===(r=i.includes)||void 0===r?void 0:r.call(i,a),chrome.contextMenus.update(Tt,{title:c?"Added ReEval":"Add to ReEval",enabled:!c}),!c){t.next=21;break}return t.next=15,chrome.action.setBadgeBackgroundColor({color:Ot.ADDED_REEVAL_COLOR});case 15:return t.next=17,chrome.action.setBadgeTextColor({color:"#fff"});case 17:return t.next=19,chrome.action.setIcon({path:"assets/recording-reeval.png"});case 19:t.next=25;break;case 21:return t.next=23,chrome.action.setBadgeBackgroundColor({color:Ot.NOT_ADDED_REEVAL_COLOR});case 23:return t.next=25,chrome.action.setIcon({path:"assets/icon-34.png"});case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.contextMenus.onClicked.addListener(function(){var t=re(te().mark((function t(e,r){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.menuItemId!==Tt){t.next=4;break}return t.next=4,ne(r);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),chrome.runtime.onMessage.addListener(function(){var t=re(te().mark((function t(e,r,n){var o;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.tab,e.type!==St.ADD_TO_REEVAL){t.next=4;break}return t.next=4,ne(o);case 4:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()),chrome.runtime.onMessage.addListener(function(){var t=xe(me().mark((function t(e,r,n){var o,a,i,c,u,s,l,f,h,p,d,v,m,y,g,b,w,x,E,k,L,_,O,T,S,j,A,P,I,R;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.type,a=e.options,"reeval-storyboard"!==o){t.next=35;break}return i=a.storyboard,c=i.sections,t.next=6,chrome.storage.local.get(null);case 6:return u=t.sent,t.next=9,chrome.storage.local.remove(Object.keys(u));case 9:return s={askForPermissions:!1,askMicrophone:!1,backgroundEffect:"blur",backup:!1,backupSetup:!1,cameraActive:!1,cameraPermission:!1,countdown:!0,firstTime:!0,hideToolbar:!0,hideUI:!0,micActive:!1,microphonePermission:!1,recording:!1,restarting:!1,recordingType:"screen",showExtension:!0,showPopup:!1},t.next=12,chrome.storage.local.set(s);case 12:return t.next=14,Le(c);case 14:return l=t.sent,f=l.windowId,t.next=18,chrome.tabs.query({windowId:f,active:!0});case 18:return h=t.sent,p=ge(h,1),d=p[0],t.next=23,chrome.storage.local.set({activeTab:d.id,ReEvalProductionOption:a});case 23:return t.next=25,chrome.storage.local.set(ye({},St.REEVAL_STATE,!0));case 25:return t.next=27,chrome.storage.local.set(ye({},St.REEVAL_WINDOW_ID,f));case 27:return t.next=29,chrome.windows.update(f,{state:chrome.windows.WindowState.FULLSCREEN});case 29:return t.next=31,chrome.tabs.sendMessage(d.id,{type:jt.REEVAL_PENDDING_STATE,options:s});case 31:return t.next=33,Dt(500);case 33:return t.next=35,chrome.tabs.sendMessage(d.id,{type:jt.REEVAL_PENDDING_STORYBOARD,options:a});case 35:if(o!==jt.REEVAL_RUN_STORYBOARD){t.next=116;break}if(Object.keys(a).length){t.next=38;break}return t.abrupt("return");case 38:return t.prev=38,t.next=41,Dt(3e3);case 41:y=null!==(v=null==a||null===(m=a.storyboard)||void 0===m?void 0:m.sections)&&void 0!==v?v:[],g=!1,b=!1,t.prev=44,x=Ee(y);case 46:return t.next=48,x.next();case 48:if(!(g=!(E=t.sent).done)){t.next=72;break}if(k=E.value,L=k.tabId,k.inx,_=k.screen_recording,!L){t.next=69;break}return t.next=54,Ft.get(St.INTERRUPT_RECORDING);case 54:if(!t.sent){t.next=56;break}return t.abrupt("break",72);case 56:return t.next=58,chrome.tabs.update(L,{highlighted:!0});case 58:return t.next=60,chrome.tabs.sendMessage(L,{type:jt.REEVAL_RUN_SECTION,options:_});case 60:return T=null!==(O=null==_?void 0:_.duration)&&void 0!==O?O:Ot.DURATION,t.next=63,Dt(T);case 63:return t.next=65,Ft.get(St.INTERRUPT_RECORDING);case 65:if(!t.sent){t.next=67;break}return t.abrupt("break",72);case 67:return t.next=69,chrome.tabs.update(L,{highlighted:!1});case 69:g=!1,t.next=46;break;case 72:t.next=78;break;case 74:t.prev=74,t.t0=t.catch(44),b=!0,w=t.t0;case 78:if(t.prev=78,t.prev=79,!g||null==x.return){t.next=83;break}return t.next=83,x.return();case 83:if(t.prev=83,!b){t.next=86;break}throw w;case 86:return t.finish(83);case 87:return t.finish(78);case 88:return t.next=90,chrome.runtime.sendMessage({type:"stop-recording-tab"});case 90:return t.next=92,Ft.set(St.INTERRUPT_RECORDING,!1);case 92:return t.next=94,chrome.windows.getCurrent();case 94:return S=t.sent,j=S.id,t.next=98,chrome.windows.update(j,{state:chrome.windows.WindowState.MAXIMIZED});case 98:return t.next=100,chrome.storage.local.set({recording:!1,pendingRecording:!1});case 100:return t.next=102,chrome.storage.local.set(ye({},St.REEVAL_STATE,!1));case 102:return t.next=104,chrome.storage.local.remove(St.REEVAL_WINDOW_ID);case 104:t.next=116;break;case 106:return t.prev=106,t.t1=t.catch(38),t.next=110,chrome.runtime.sendMessage({type:"stop-recording-tab"});case 110:return t.next=112,chrome.storage.local.set({recording:!1,pendingRecording:!1});case 112:return t.next=114,chrome.storage.local.set(ye({},St.REEVAL_STATE,!1));case 114:return t.next=116,chrome.storage.local.remove(St.REEVAL_WINDOW_ID);case 116:if(o!==jt.CANCEL_RECORDING){t.next=129;break}return t.next=119,chrome.windows.getCurrent();case 119:return A=t.sent,P=A.id,t.next=123,chrome.windows.update(P,{state:chrome.windows.WindowState.MAXIMIZED});case 123:return t.next=125,chrome.storage.local.set({recording:!1,pendingRecording:!1});case 125:return t.next=127,chrome.storage.local.set(ye({},St.REEVAL_STATE,!1));case 127:return t.next=129,chrome.storage.local.remove(St.REEVAL_WINDOW_ID);case 129:if(o!==jt.INTERRUPT_RECORDING){t.next=142;break}return t.next=132,chrome.windows.getCurrent();case 132:return I=t.sent,R=I.id,t.next=136,chrome.windows.update(R,{state:chrome.windows.WindowState.MAXIMIZED});case 136:return t.next=138,chrome.storage.local.set({recording:!1,pendingRecording:!1});case 138:return t.next=140,chrome.storage.local.set(ye({},St.REEVAL_STATE,!1));case 140:return t.next=142,chrome.storage.local.remove(St.REEVAL_WINDOW_ID);case 142:case"end":return t.stop()}}),t,null,[[38,106],[44,74,78,88],[79,,83,87]])})));return function(e,r,n){return t.apply(this,arguments)}}()),_().config({driver:_().INDEXEDDB,name:"screenity",version:1});var Ne=_().createInstance({name:"chunks"}),De=_().createInstance({name:"localDirectory"}),Ge=function(){var t=Re(Pe().mark((function t(){var e,r,n,o;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["recordingTab"]);case 2:return e=t.sent,r=e.recordingTab,t.next=6,chrome.storage.local.get(["offscreen"]);case 6:n=t.sent,o=n.offscreen,(null!==r||o)&&(chrome.storage.local.set({recording:!0}),Fe());case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ce=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return navigator.userAgent.includes("Chrome/")&&parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10),t.next=4,chrome.storage.local.get(["activeTab"]);case 4:e=t.sent,r=e.activeTab,chrome.tabs.get(r,(function(t){t&&chrome.windows.update(t.windowId,{focused:!0},Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.tabs.update(r,{active:!0,selected:!0,highlighted:!0}),w(r),b(r,{type:"ready-to-record"}),t.next=5,chrome.storage.local.get(["countdown"]);case 5:t.sent.countdown?setTimeout((function(){Ge()}),3500):setTimeout((function(){Ge()}),500);case 8:case"end":return t.stop()}}),t)}))))}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ue=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["activeTab"]);case 2:e=t.sent,r=e.activeTab,w(r).then(Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(r,{type:"ready-to-record"}),t.next=3,chrome.storage.local.get(["countdown"]);case 3:t.sent.countdown?setTimeout((function(){Ge()}),3e3):Fe();case 6:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Fe=function(){var t=Re(Pe().mark((function t(){var e,r,n,o,a,i,c;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.storage.local.set({recordingStartTime:Date.now(),restarting:!1,recording:!0}),t.next=3,chrome.storage.local.get(["customRegion"]);case 3:return e=t.sent,r=e.customRegion,Qe(r?{type:"start-recording-tab",region:!0}:{type:"start-recording-tab"}),chrome.action.setIcon({path:"assets/recording-logo.png"}),t.next=9,chrome.storage.local.get(["alarm"]);case 9:return n=t.sent,o=n.alarm,t.next=13,chrome.storage.local.get(["alarmTime"]);case 13:a=t.sent,i=a.alarmTime,o&&(c=parseFloat(i),chrome.alarms.create("recording-alarm",{delayInMinutes:c/60}));case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();chrome.commands.onCommand.addListener(function(){var t=Re(Pe().mark((function t(e){var r,n,o;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("start-recording"!==e){t.next=7;break}return t.next=3,E();case 3:r=t.sent,!1===navigator.onLine&&!r.url.includes("/playground.html")&&!r.url.includes("/setup.html")||r.url.startsWith("chrome://")||r.url.startsWith("chrome-extension://")&&!r.url.includes("/playground.html")&&!r.url.includes("/setup.html")||r.url.includes("stackoverflow.com/")||r.url.includes("chrome.google.com/webstore")||r.url.includes("chromewebstore.google.com")?chrome.tabs.create({url:"playground.html",active:!0}).then((function(t){chrome.storage.local.set({activeTab:t.id}),chrome.tabs.onUpdated.addListener((function t(e,r,n){e===n.id&&"complete"===r.status&&(setTimeout((function(){b(n.id,{type:"start-stream"})}),500),chrome.tabs.onUpdated.removeListener(t))}))})):b(r.id,{type:"start-stream"}),t.next=19;break;case 7:if("cancel-recording"!==e){t.next=14;break}return t.next=10,E();case 10:n=t.sent,b(n.id,{type:"cancel-recording"}),t.next=19;break;case 14:if("pause-recording"!==e){t.next=19;break}return t.next=17,E();case 17:o=t.sent,b(o.id,{type:"pause-recording"});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var Me=function(){var t=Re(Pe().mark((function t(e){var r,n,o,a,i;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("recording-alarm"!==e.name){t.next=22;break}return t.next=3,chrome.storage.local.get(["recording"]);case 3:if(!t.sent.recording){t.next=21;break}return Xe(),t.next=9,chrome.storage.local.get(["recordingTab"]);case 9:return r=t.sent,n=r.recordingTab,b(n,{type:"stop-recording-tab"}),t.next=14,chrome.storage.local.get(["activeTab"]);case 14:return o=t.sent,a=o.activeTab,b(a,{type:"stop-recording-tab"}),t.next=19,E();case 19:i=t.sent,b(i.id,{type:"stop-recording-tab"});case 21:chrome.alarms.clear("recording-alarm");case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Ve=function(t){Me(t)},We=function(){chrome.alarms.onAlarm.hasListener(Ve)||chrome.alarms.onAlarm.addListener(Ve)};chrome.permissions&&chrome.permissions.contains({permissions:["alarms"]},(function(t){t&&We()}));var Be=function(){var t=Re(Pe().mark((function t(e){var r,n,o,a,i,c,u,s,l,f,h,p,d,v,m,y,g,w,x,E,k,L,_;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["recordingStartTime"]);case 2:return r=t.sent,n=r.recordingStartTime,t.next=6,chrome.tabs.get(e.tabId);case 6:return o=t.sent,t.next=9,chrome.storage.local.get(["recording"]);case 9:return a=t.sent,i=a.recording,t.next=13,chrome.storage.local.get(["restarting"]);case 13:return c=t.sent,u=c.restarting,t.next=17,chrome.storage.local.get([St.REEVAL_STATE]);case 17:return s=t.sent,l=s[St.REEVAL_STATE],t.next=21,chrome.storage.local.get([St.REEVAL_WINDOW_ID]);case 21:if(f=t.sent,h=f[St.REEVAL_WINDOW_ID],!i){t.next=40;break}return t.next=26,chrome.storage.local.get(["tabRecordedID"]);case 26:return p=t.sent,(d=p.tabRecordedID)&&d!==e.tabId?b(e.tabId,{type:"hide-popup-recording"}):o.url.includes("backup.html")&&o.url.includes("chrome-extension://")||chrome.storage.local.set({activeTab:e.tabId}),t.next=31,chrome.storage.local.get(["region"]);case 31:return v=t.sent,m=v.region,t.next=35,chrome.storage.local.get(["customRegion"]);case 35:y=t.sent,g=y.customRegion,m||g||b(e.tabId,{type:"recording-check"}),t.next=41;break;case 40:i||u||l||h===(null==e?void 0:e.windowId)||b(e.tabId,{type:"recording-ended"});case 41:if(!n){t.next=59;break}return t.next=44,chrome.storage.local.get(["alarm"]);case 44:if(!t.sent.alarm){t.next=57;break}return t.next=49,chrome.storage.local.get(["alarmTime"]);case 49:w=t.sent,x=w.alarmTime,E=parseFloat(x),k=Math.floor((Date.now()-n)/1e3),L=E-k,b(e.tabId,{type:"time",time:L}),t.next=59;break;case 57:_=Math.floor((Date.now()-n)/1e3),b(e.tabId,{type:"time",time:_});case 59:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function qe(t){return new Promise((function(e,r){var n=new FileReader;n.onload=function(){e(n.result)},n.onerror=function(t){r(t)},n.readAsDataURL(t)}))}chrome.windows.onFocusChanged.addListener(function(){var t=Re(Pe().mark((function t(e){var r,n,o;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==chrome.windows.WINDOW_ID_NONE){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,chrome.tabs.query({active:!0,windowId:e});case 4:r=t.sent,n=Se(r,1),(o=n[0])&&Be({tabId:o.id,windowId:e});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.tabs.onActivated.addListener(function(){var t=Re(Pe().mark((function t(e){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Be(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.tabs.onUpdated.addListener(function(){var t=Re(Pe().mark((function t(e,r,n){var o,a,i,c,u,s,l,f,h,p,d,v,m,y,g,w,x,E,k;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("complete"!==r.status){t.next=52;break}return t.next=3,chrome.storage.local.get(["recording"]);case 3:return o=t.sent,a=o.recording,t.next=7,chrome.storage.local.get(["restarting"]);case 7:return i=t.sent,c=i.restarting,t.next=11,chrome.storage.local.get([St.REEVAL_STATE]);case 11:return u=t.sent,s=u[St.REEVAL_STATE],t.next=15,chrome.storage.local.get([St.REEVAL_WINDOW_ID]);case 15:return l=t.sent,f=l[St.REEVAL_WINDOW_ID],t.next=19,chrome.storage.local.get(["tabRecordedID"]);case 19:return h=t.sent,p=h.tabRecordedID,a||c||s||f===(null==n?void 0:n.windowId)?a&&p&&p===e&&b(e,{type:"recording-check",force:!0}):b(e,{type:"recording-ended"}),t.next=24,chrome.storage.local.get(["recordingStartTime"]);case 24:return d=t.sent,v=d.recordingStartTime,t.next=28,chrome.tabs.get(e);case 28:if(m=t.sent,!v){t.next=47;break}return t.next=32,chrome.storage.local.get(["alarm"]);case 32:if(!t.sent.alarm){t.next=45;break}return t.next=37,chrome.storage.local.get(["alarmTime"]);case 37:y=t.sent,g=y.alarmTime,w=parseFloat(g),x=Math.floor((Date.now()-v)/1e3),b(e,{type:"time",time:w-x}),t.next=47;break;case 45:E=Math.floor((Date.now()-v)/1e3),b(e,{type:"time",time:E});case 47:return t.next=49,chrome.commands.getAll();case 49:k=t.sent,b(e,{type:"commands",commands:k}),m.url.includes(chrome.runtime.getURL("playground.html"))&&"complete"===r.status&&b(m.id,{type:"toggle-popup"});case 52:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}());var Ye=function(){var t=Re(Pe().mark((function t(e){var r,n,o,a,i,c,u,s,l,f,h,p=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p.length>1&&void 0!==p[1]&&p[1],t.next=3,chrome.storage.local.get(["sendingChunks","sandboxTab"]);case 3:if(n=t.sent,o=n.sendingChunks,a=n.sandboxTab,!o){t.next=9;break}return console.warn("Chunks are already being sent, skipping..."),t.abrupt("return");case 9:return t.next=11,chrome.storage.local.set({sendingChunks:!0});case 11:if(0!==e.length){t.next=16;break}return t.next=14,chrome.storage.local.set({sendingChunks:!1});case 14:return b(a,{type:"make-video-tab",override:r}),t.abrupt("return");case 16:e.sort((function(t,e){return t.timestamp-e.timestamp})),i=0,c=10,u=e.length,b(a,{type:"chunk-count",count:u,override:r}),s=function(){var t=Re(Pe().mark((function t(e){var r,n=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:0,t.prev=1,t.next=4,b(a,{type:"new-chunk-tab",chunks:e});case 4:if(t.sent){t.next=7;break}throw new Error("No response or failed response from tab.");case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r<3?(console.error("Sending batch failed, retrying... Attempt ".concat(r+1),t.t0),setTimeout((function(){return s(e,r+1)}),1e3)):console.error("Maximum retry attempts reached for this batch.",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();case 24:if(!(i<u)){t.next=36;break}return l=Math.min(i+c,u),t.next=28,Promise.all(e.slice(i,l).map(function(){var t=Re(Pe().mark((function t(e,r){var n;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe(e.chunk);case 3:return n=t.sent,t.abrupt("return",{chunk:n,index:i+r});case 7:return t.prev=7,t.t0=t.catch(0),console.error("Error converting chunk to Base64",t.t0),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}()));case 28:if(f=t.sent,!((h=f.filter((function(t){return null!==t}))).length>0)){t.next=33;break}return t.next=33,s(h);case 33:i+=c,t.next=24;break;case 36:return t.next=38,chrome.storage.local.set({sendingChunks:!1});case 38:b(a,{type:"make-video-tab",override:r});case 39:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ze=function(){var t=Re(Pe().mark((function t(){var e,r,n=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]&&n[0],t.prev=1,r=[],t.next=5,Ne.iterate((function(t,e){r.push(t)}));case 5:Ye(r,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),chrome.runtime.reload();case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),Xe=function(){var t=Re(Pe().mark((function t(){var e,r,n,o,a,i;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.storage.local.set({restarting:!1}),t.next=3,chrome.storage.local.get(["recordingStartTime"]);case 3:if(e=t.sent,r=e.recordingStartTime,n=Date.now()-r,0===r&&(n=0),chrome.storage.local.set({recording:!1,recordingDuration:n,tabRecordedID:null}),chrome.storage.local.set({recordingStartTime:0}),!(n>42e4)){t.next=14;break}chrome.tabs.create({url:"editorfallback.html",active:!0},(function(t){chrome.tabs.onUpdated.addListener((function e(r,n,o){r===t.id&&"complete"===n.status&&(chrome.tabs.onUpdated.removeListener(e),chrome.storage.local.set({sandboxTab:t.id}),ze())}))})),t.next=23;break;case 14:return t.next=16,chrome.tabs.query({url:chrome.runtime.getURL("editor.html"),currentWindow:!0});case 16:if(o=t.sent,a=Se(o,1),!(i=a[0])){t.next=22;break}return t.next=22,chrome.tabs.remove(i.id);case 22:chrome.tabs.create({url:"editor.html",active:!0},(function(t){chrome.tabs.onUpdated.addListener((function e(r,n,o){r===t.id&&"complete"===n.status&&(chrome.tabs.onUpdated.removeListener(e),chrome.storage.local.set({sandboxTab:t.id}),ze())}))}));case 23:return chrome.action.setIcon({path:"assets/icon-34.png"}),t.next=26,chrome.storage.local.get(["wasRegion"]);case 26:t.sent.wasRegion&&chrome.storage.local.set({wasRegion:!1,region:!0}),chrome.alarms.clear("recording-alarm"),nr();case 31:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Je=function(){var t=Re(Pe().mark((function t(){var e,r,n,o,a,i;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="editor.html",t.next=3,chrome.storage.local.get(["sandboxTab"]);case 3:return r=t.sent,n=r.sandboxTab,t.next=7,chrome.tabs.query({url:chrome.runtime.getURL("editor.html"),currentWindow:!0});case 7:if(o=t.sent,a=Se(o,1),!(i=a[0])){t.next=13;break}return t.next=13,chrome.tabs.remove(i.id);case 13:chrome.tabs.create({url:e,active:!0},(function(t){chrome.tabs.onUpdated.addListener((function e(r,o,a){r===t.id&&"complete"===o.status&&(chrome.tabs.onUpdated.removeListener(e),x(n),chrome.storage.local.set({sandboxTab:t.id}),ze(!0))}))}));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();chrome.runtime.onStartup.addListener((function(){}));var $e=function(){var t=Re(Pe().mark((function t(){var e;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:e=t.sent,b(e.id,{type:"ready-to-record"});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),He=function(){var t=Re(Pe().mark((function t(){var e,r,n,o,a,i,c,u;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["micActive","defaultAudioInput","defaultAudioOutput","defaultVideoInput","systemAudio","recordingType","ReEvalProductionOption"]);case 2:return e=t.sent,r=e.micActive,n=e.defaultAudioInput,o=e.defaultAudioOutput,a=e.defaultVideoInput,i=e.systemAudio,c=e.recordingType,u=e.ReEvalProductionOption,t.abrupt("return",{micActive:r,defaultAudioInput:n,defaultAudioOutput:o,defaultVideoInput:a,systemAudio:i,recordingType:c,ReEvalProductionOption:u});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ke=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.storage.local.set({restarting:!0}),t.next=3,chrome.storage.local.get(["region"]);case 3:return t.sent.region,t.next=7,chrome.storage.local.get(["wasRegion"]);case 7:t.sent.wasRegion&&chrome.storage.local.set({wasRegion:!1,region:!0}),chrome.action.setIcon({path:"assets/icon-34.png"});case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ze=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.storage.local.set({restarting:!0}),navigator.userAgent.includes("Chrome/")&&parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10),Ue();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Qe=function(){var t=Re(Pe().mark((function t(e){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.storage.local.get(["recordingTab","offscreen"],(function(t){t.offscreen?chrome.runtime.sendMessage(e):b(t.recordingTab,e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),tr=function(){var t=Re(Pe().mark((function t(e,r){var n,o,a;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["backupTab"]);case 2:n=t.sent,o=n.backupTab,a=chrome.runtime.getURL("backup.html"),o?chrome.tabs.get(o,(function(t){t?b(t.id,{type:"init-backup",request:e,tabId:r}):chrome.tabs.create({url:a,active:!0,pinned:!0,index:0},(function(t){chrome.storage.local.set({backupTab:t.id}),chrome.tabs.onUpdated.addListener((function n(o,a,i){o===t.id&&"complete"===a.status&&(b(t.id,{type:"init-backup",request:e,tabId:r}),chrome.tabs.onUpdated.removeListener(n))}))}))})):chrome.tabs.create({url:a,active:!0,pinned:!0,index:0},(function(t){chrome.storage.local.set({backupTab:t.id}),chrome.tabs.onUpdated.addListener((function n(o,a,i){o===t.id&&"complete"===a.status&&(b(t.id,{type:"init-backup",request:e,tabId:r}),chrome.tabs.onUpdated.removeListener(n))}))}));case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),er=function(){var t=Re(Pe().mark((function t(e){var r,n,o,a,i,c,u,s,l,f=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:null,t.next=3,chrome.storage.local.get(["backup"]);case 3:return n=t.sent,o=n.backup,t.next=7,E();case 7:if(a=t.sent,null===r){t.next=12;break}return t.next=11,chrome.tabs.get(r);case 11:a=t.sent;case 12:return chrome.storage.local.set({activeTab:a.id,tabRecordedID:null,memoryError:!1}),a.url.includes(chrome.runtime.getURL("playground.html"))?chrome.storage.local.set({tabPreferred:!0}):chrome.storage.local.set({tabPreferred:!1}),t.prev=14,t.next=17,chrome.runtime.getContexts({});case 17:if(!t.sent.find((function(t){return"OFFSCREEN_DOCUMENT"===t.contextType}))){t.next=22;break}return t.next=22,chrome.offscreen.closeDocument();case 22:t.next=26;break;case 24:t.prev=24,t.t0=t.catch(14);case 26:if(!e.region){t.next=42;break}if(null!==r&&chrome.tabs.update(r,{active:!0}),chrome.storage.local.set({recordingTab:a.id,offscreen:!1,region:!0}),!e.customRegion){t.next=33;break}Qe({type:"loaded",request:e,backup:o,region:!0}),t.next=40;break;case 33:throw t.prev=33,new Error("Exit offscreen recording");case 37:t.prev=37,t.t1=t.catch(33),chrome.tabs.create({url:"recorder.html",pinned:!0,index:0,active:!!a.url.includes(chrome.runtime.getURL("playground.html"))}).then((function(t){chrome.storage.local.set({recordingTab:t.id,offscreen:!1,region:!1,wasRegion:!0,tabRecordedID:a.id}),chrome.tabs.onUpdated.addListener((function r(n,i,c){n===t.id&&"complete"===i.status&&(chrome.tabs.onUpdated.removeListener(r),Qe({type:"loaded",request:e,tabID:a.id,backup:o,isTab:!0}))}))}));case 40:t.next=72;break;case 42:if(t.prev=42,e.offscreenRecording&&!e.camera){t.next=45;break}throw new Error("Exit offscreen recording");case 45:return null!==r&&chrome.tabs.update(r,{active:!0}),t.next=48,chrome.storage.local.get(["qualityValue"]);case 48:return i=t.sent,c=i.qualityValue,t.next=52,chrome.storage.local.get(["fpsValue"]);case 52:return u=t.sent,s=u.fpsValue,t.next=56,chrome.runtime.getContexts({});case 56:if(!t.sent.find((function(t){return"OFFSCREEN_DOCUMENT"===t.contextType}))){t.next=61;break}return t.next=61,chrome.offscreen.closeDocument();case 61:return t.next=63,chrome.offscreen.createDocument({url:"recorderoffscreen.html",reasons:["USER_MEDIA","AUDIO_PLAYBACK","DISPLAY_MEDIA"],justification:"Recording from getDisplayMedia API"});case 63:chrome.storage.local.set({recordingTab:null,offscreen:!0,region:!1,wasRegion:!1}),Qe({type:"loaded",request:e,isTab:!1,quality:c,fps:s,backup:o}),t.next=72;break;case 67:t.prev=67,t.t2=t.catch(42),l=!0,e.camera&&(l=!1),chrome.tabs.create({url:"recorder.html",pinned:!0,index:0,active:l}).then((function(t){chrome.storage.local.set({recordingTab:t.id,offscreen:!1,region:!1,wasRegion:!1}),chrome.tabs.onUpdated.addListener((function r(n,a,i){n===t.id&&"complete"===a.status&&(chrome.tabs.onUpdated.removeListener(r),Qe({type:"loaded",request:e,backup:o}))}))}));case 72:case"end":return t.stop()}}),t,null,[[14,24],[33,37],[42,67]])})));return function(e){return t.apply(this,arguments)}}(),rr=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["sandboxTab"]);case 2:e=t.sent,r=e.sandboxTab,b(r,{type:"saved-to-drive"});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),nr=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,chrome.runtime.getContexts({});case 3:if(!t.sent.find((function(t){return"OFFSCREEN_DOCUMENT"===t.contextType}))){t.next=8;break}return t.next=8,chrome.offscreen.closeDocument();case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}(),or=function(){var t=Re(Pe().mark((function t(){var e,r,n,o,a,i,c,u,s,l,f;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=chrome.runtime.getManifest().content_scripts,r=e.map((function(t){return chrome.tabs.query({url:t.matches})})),t.next=4,Promise.all(r);case 4:for(n=t.sent,o=[],a=0;a<n.length;a++){i=n[a],c=e[a],u=Te(i);try{for(u.s();!(s=u.n()).done;)l=s.value,f=chrome.scripting.executeScript({target:{tabId:l.id},files:c.js},(function(){return chrome.runtime.lastError})),o.push(f)}catch(t){u.e(t)}finally{u.f()}}return t.next=9,Promise.all(o);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();chrome.runtime.onInstalled.addListener(function(){var t=Re(Pe().mark((function t(e){var r,n,o,a;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"install"===e.reason?(chrome.storage.local.clear(),(r=chrome.i18n.getMessage("@@ui_locale")).includes("en")?chrome.runtime.setUninstallURL("https://tally.so/r/w8Zro5?version="+chrome.runtime.getManifest().version):chrome.runtime.setUninstallURL("http://translate.google.com/translate?js=n&sl=auto&tl="+r+"&u=https://tally.so/r/w8Zro5?version="+chrome.runtime.getManifest().version),chrome.storage.local.set({firstTime:!0}),chrome.tabs.create({url:"setup.html"})):"update"===e.reason&&("2.8.6"===e.previousVersion?(chrome.storage.local.clear(),chrome.storage.local.set({updatingFromOld:!0})):chrome.storage.local.set({updatingFromOld:!1}),(n=chrome.i18n.getMessage("@@ui_locale")).includes("en")?chrome.runtime.setUninstallURL("https://tally.so/r/3Ex6kX?version="+chrome.runtime.getManifest().version):chrome.runtime.setUninstallURL("http://translate.google.com/translate?js=n&sl=auto&tl="+n+"&u=https://tally.so/r/3Ex6kX?version="+chrome.runtime.getManifest().version)),navigator.userAgent.includes("Chrome/")&&parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10)<=109&&chrome.storage.local.set({backup:!1}),chrome.storage.local.set({systemAudio:!0}),t.next=5,chrome.storage.local.get(["backupTab"]);case 5:o=t.sent,(a=o.backupTab)&&x(a),or();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),chrome.tabs.onRemoved.addListener(function(){var t=Re(Pe().mark((function t(e,r){var n,o,a,i,c,u,s,l;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["region"]);case 2:if(!t.sent.region){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,chrome.storage.local.get(["recordingTab"]);case 8:return n=t.sent,o=n.recordingTab,t.next=12,chrome.storage.local.get(["recording"]);case 12:return a=t.sent,i=a.recording,t.next=16,chrome.storage.local.get(["restarting"]);case 16:if(c=t.sent,u=c.restarting,e!==o||u){t.next=26;break}return chrome.storage.local.set({recordingTab:null}),t.next=22,chrome.storage.local.get(["activeTab"]);case 22:s=t.sent,l=s.activeTab;try{i&&w(l),b(l,{type:"stop-recording-tab"},null,(function(){b(e,{type:"stop-recording-tab"}),chrome.storage.local.set({activeTab:e})}))}catch(t){b(e,{type:"stop-recording-tab"}),chrome.storage.local.set({activeTab:e})}chrome.action.setIcon({path:"assets/icon-34.png"});case 26:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());var ar=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Qe({type:"dismiss-recording"}),chrome.action.setIcon({path:"assets/icon-34.png"}),nr(),chrome.storage.local.set({recordingTab:null,sandboxTab:null,recording:!1}),chrome.runtime.sendMessage({type:"discard-backup"});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ir=function(){var t=Re(Pe().mark((function t(){var e,r,n,o;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["recordingTab"]);case 2:return e=t.sent,r=e.recordingTab,t.next=6,chrome.storage.local.get(["offscreen"]);case 6:if(n=t.sent,o=n.offscreen,!r||o){t.next=12;break}try{chrome.tabs.get(r,(function(t){t||ar()}))}catch(t){ar()}t.next=18;break;case 12:if(!o){t.next=18;break}return t.next=15,chrome.runtime.getContexts({});case 15:t.sent.find((function(t){return"OFFSCREEN_DOCUMENT"===t.contextType}))||ar();case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),cr=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ue();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ur=function(){var t=Re(Pe().mark((function t(e,r){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.tabs.create({url:"download.html",active:!1},(function(t){chrome.tabs.onUpdated.addListener((function n(o,a,i){o===t.id&&"complete"===a.status&&(chrome.tabs.onUpdated.removeListener(n),b(t.id,{type:"download-video",base64:e,title:r}))}))}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),sr=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.tabs.create({url:"download.html",active:!1},(function(t){chrome.tabs.onUpdated.addListener((function e(r,n,o){r===t.id&&"complete"===n.status&&(chrome.tabs.onUpdated.removeListener(e),b(t.id,{type:"download-indexed-db"}))}))}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),lr=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="editorfallback.html",navigator.userAgent.includes("Chrome/")&&parseInt(navigator.userAgent.match(/Chrome\/([0-9]+)/)[1],10)<=109&&(e="editorfallback.html"),r=[],t.next=5,Ne.iterate((function(t,e){r.push(t)}));case 5:if(0!==r.length){t.next=7;break}return t.abrupt("return");case 7:chrome.tabs.create({url:e,active:!0},function(){var t=Re(Pe().mark((function t(e){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.storage.local.set({sandboxTab:e.id}),t.next=3,new Promise((function(t){chrome.tabs.onUpdated.addListener((function(t,r){"complete"===r.status&&t===e.id&&(b(e.id,{type:"restore-recording"}),ze())}))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),fr=function(){var t=Re(Pe().mark((function t(e){var r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,Ne.iterate((function(t,e){r.push(t)}));case 3:if(0!==r.length){t.next=6;break}return e({restore:!1,chunks:[]}),t.abrupt("return");case 6:e({restore:!0});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),hr=function(t){var e=t.match(/^data:(.*?);base64,/);if(null!==e){for(var r=e[1],n=atob(t.slice(e[0].length)),o=new Uint8Array(n.length),a=0;a<n.length;a++)o[a]=n.charCodeAt(a);return new Blob([o],{type:r})}for(var i=atob(t),c=new Uint8Array(i.length),u=0;u<i.length;u++)c[u]=i.charCodeAt(u);return new Blob([c],{type:"video/webm"})},pr=function(){var t=Re(Pe().mark((function t(e,r){var n,o,a,i,c,u,s,l,h,p,d=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.length>2&&void 0!==d[2]&&d[2]){t.next=7;break}n=hr(r.base64),o=r.title+".mp4",f(n,o,e).then((function(){rr()})),t.next=25;break;case 7:return a=[],t.next=10,Ne.iterate((function(t,e){a.push(t)}));case 10:i=[],c=0,u=0,s=a;case 13:if(!(u<s.length)){t.next=22;break}if(!((l=s[u]).timestamp<c)){t.next=17;break}return t.abrupt("continue",19);case 17:c=l.timestamp,i.push(l.chunk);case 19:u++,t.next=13;break;case 22:h=new Blob(i,{type:"video/webm"}),p=r.title+".webm",f(h,p,e).then((function(){rr()}));case 25:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),dr=function(){var t=Re(Pe().mark((function t(e){var r,n,o,a,i;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["backup"]);case 2:return r=t.sent,n=r.backup,t.next=6,chrome.storage.local.get(["backupSetup"]);case 6:if(o=t.sent,a=o.backupSetup,chrome.storage.local.set({sendingChunks:!1}),!n){t.next=17;break}return a||De.clear(),t.next=13,E();case 13:i=t.sent,tr(e,i.id),t.next=18;break;case 17:er(e);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),vr=function(){var t=Re(Pe().mark((function t(e){var r,n;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["backupTab"]);case 2:r=t.sent,(n=r.backupTab)?b(n,{type:"write-file",index:e.index},null,(function(){Qe({type:"stop-recording-tab"})})):Qe({type:"stop-recording-tab"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),mr=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["backupTab"]);case 2:e=t.sent,(r=e.backupTab)&&b(r,{type:"close-writable"}),Xe();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),yr=function(){var t=Re(Pe().mark((function t(e,r){var n,o;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["sandboxTab"]);case 2:n=t.sent,o=n.sandboxTab,b(o,{type:"new-chunk-tab",chunk:e.chunk,index:e.index}),r({status:"ok"});case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),gr=function(){var t=Re(Pe().mark((function t(){var e;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,He();case 2:e=t.sent,Qe({type:"streaming-data",data:JSON.stringify(e)});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),br=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.action.setIcon({path:"assets/icon-34.png"}),t.next=3,chrome.storage.local.get(["activeTab"]);case 3:e=t.sent,r=e.activeTab,b(r,{type:"stop-pending"}),w(r),nr();case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),wr=function(){var t=Re(Pe().mark((function t(e){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.memoryError&&chrome.storage.local.set({recording:!1,restarting:!1,tabRecordedID:null,memoryError:!0}),Qe({type:"stop-recording-tab"});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),xr=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Er=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.runtime.sendMessage({type:"discard-backup"}),ar();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),kr=function(){var t=Re(Pe().mark((function t(e){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:chrome.storage.local.get(["region"],(function(t){t.region&&Qe({type:"set-mic-active-tab",active:e.active,defaultAudioInput:e.defaultAudioInput})}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Lr=function(){var t=Re(Pe().mark((function t(e){var r,n,o,a,i,c;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["activeTab"]);case 2:return r=t.sent,n=r.activeTab,Qe({type:"recording-error"}).then((function(){b(n,{type:"stop-pending"}),w(n),"stream-error"===e.error?b(n,{type:"stream-error"}):"backup-error"===e.error&&b(n,{type:"backup-error"})})),t.next=7,chrome.storage.local.get(["recordingTab"]);case 7:return o=t.sent,a=o.recordingTab,t.next=11,chrome.storage.local.get(["region"]);case 11:i=t.sent,c=i.region,a&&!c&&x(a),chrome.storage.local.set({recordingTab:null}),nr();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_r=function(){var t=Re(Pe().mark((function t(e){var r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:(r=t.sent)&&b(r.id,{type:"on-get-permissions",data:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Or=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["recordingTab"]);case 2:e=t.sent,(r=e.recordingTab)&&chrome.tabs.get(r,(function(t){t&&t.url.includes("chrome-extension")&&t.url.includes("recorder.html")&&x(r)}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Tr=function(){var t=Re(Pe().mark((function t(e){var r,n;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.storage.local.set({surface:e.surface}),t.next=3,chrome.storage.local.get(["activeTab"]);case 3:r=t.sent,n=r.activeTab,b(n,{type:"set-surface",surface:e.surface});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Sr=function(){var t=Re(Pe().mark((function t(){var e,r,n,o=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]&&o[0],t.next=3,chrome.storage.local.get(["activeTab"]);case 3:r=t.sent,n=r.activeTab,b(n,e?{type:"pip-started"}:{type:"pip-ended"});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),jr=function(){var t=Re(Pe().mark((function t(){var e,r;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,chrome.storage.local.get(["token"]);case 2:e=t.sent,r=e.token,fetch("https://accounts.google.com/o/oauth2/revoke?token="+r),chrome.identity.removeCachedAuthToken({token:r}),chrome.storage.local.set({token:!1});case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ar=function(){var t=Re(Pe().mark((function t(e){var r,n;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return chrome.storage.local.set({recording:!1,restarting:!1,tabRecordedID:null,memoryError:!0}),Qe({type:"stop-recording-tab"}),t.next=4,chrome.storage.local.get(["activeTab"]);case 4:r=t.sent,n=r.activeTab,b(n,{type:"stop-pending"}),w(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Pr=function(){var t=Re(Pe().mark((function t(){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ne.clear();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Ir=function(){var t=Re(Pe().mark((function t(e,r){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e&&0!==r){t.next=2;break}return t.abrupt("return");case 2:chrome.windows.getCurrent((function(t){chrome.windows.update(t.id,{width:e,height:r})}));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),Rr=function(){var t=Re(Pe().mark((function t(e){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.storage.estimate().then(function(){var t=Re(Pe().mark((function t(r){return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e({data:r});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();chrome.runtime.onMessage.addListener((function(t,e,r){if("desktop-capture"===t.type)dr(t);else if("backup-created"===t.type)er(t.request,t.tabId);else if("write-file"===t.type)vr(t);else if("handle-restart"===t.type)Ze();else if("handle-dismiss"===t.type)Ke();else if("reset-active-tab"===t.type)Ce();else if("reset-active-tab-restart"===t.type)Ue();else if("start-rec"===t.type)Fe();else if("video-ready"===t.type)mr();else if("start-recording"===t.type)Fe();else if("restarted"===t.type)$e();else{if("new-chunk"===t.type)return yr(t,r),!0;if("get-streaming-data"===t.type)gr();else if("cancel-recording"===t.type)br();else if("stop-recording-tab"===t.type)wr(t);else if("restart-recording-tab"===t.type)xr();else if("dismiss-recording-tab"===t.type)Er();else if("pause-recording-tab"===t.type)Qe({type:"pause-recording-tab"});else if("resume-recording-tab"===t.type)Qe({type:"resume-recording-tab"});else if("set-mic-active-tab"===t.type)kr(t);else if("recording-error"===t.type)Lr(t);else if("on-get-permissions"===t.type)_r(t);else if("recording-complete"===t.type)Or();else if("check-recording"===t.type)ir();else if("review-screenity"===t.type)k("https://chrome.google.com/webstore/detail/screenity-screen-recorder/kbbdabhdfibnancpjfhlkhafgdilcnji/reviews",!1,!0);else if("follow-twitter"===t.type)k("https://alyssax.substack.com/",!1,!0);else if("open-processing-info"===t.type)k("https://help.screenity.io/editing-and-exporting/dJRFpGq56JFKC7k8zEvsqb/why-is-there-a-5-minute-limit-for-editing/ddy4e4TpbnrFJ8VoRT37tQ",!0,!0);else if("upgrade-info"===t.type)k("https://help.screenity.io/getting-started/77KizPC8MHVGfpKpqdux9D/what-are-the-technical-requirements-for-using-screenity/6kdB6qru6naVD8ZLFvX3m9",!0,!0);else if("trim-info"===t.type)k("https://help.screenity.io/editing-and-exporting/dJRFpGq56JFKC7k8zEvsqb/how-to-cut-trim-or-mute-parts-of-your-video/svNbM7YHYY717MuSWXrKXH",!0,!0);else if("join-waitlist"===t.type)k("https://tally.so/r/npojNV",!0,!0);else if("chrome-update-info"===t.type)k("https://help.screenity.io/getting-started/77KizPC8MHVGfpKpqdux9D/what-are-the-technical-requirements-for-using-screenity/6kdB6qru6naVD8ZLFvX3m9",!0,!0);else if("set-surface"===t.type)Tr(t);else if("pip-ended"===t.type)Sr(!1);else if("pip-started"===t.type)Sr(!0);else if("new-sandbox-page-restart"===t.type)cr();else if("sign-out-drive"===t.type)jr();else if("open-help"===t.type)k("https://help.screenity.io/",!0,!0);else if("memory-limit-help"===t.type)k("https://help.screenity.io/troubleshooting/9Jy5RGjNrBB42hqUdREQ7W/what-does-%E2%80%9Cmemory-limit-reached%E2%80%9D-mean-when-recording/8WkwHbt3puuXunYqQnyPcb",!0,!0);else if("open-home"===t.type)k("https://screenity.io/",!1,!0);else if("report-bug"===t.type)k("https://tally.so/r/3ElpXq?version="+chrome.runtime.getManifest().version,!1,!0);else if("clear-recordings"===t.type)Pr();else if("force-processing"===t.type)Je();else if("focus-this-tab"===t.type)w(e.tab.id);else if("stop-recording-tab-backup"===t.type)Ar(t);else if("indexed-db-download"===t.type)sr();else{if("get-platform-info"===t.type)return function(t){chrome.runtime.getPlatformInfo((function(e){t(e)}))}(r),!0;if("restore-recording"===t.type)lr();else{if("check-restore"===t.type)return fr(r),!0;if("check-capture-permissions"===t.type)return chrome.permissions.contains({permissions:["desktopCapture","alarms","offscreen"]},(function(t){t?r({status:"ok"}):chrome.permissions.request({permissions:["desktopCapture","alarms","offscreen"]},(function(t){t?(We(),r({status:"ok"})):r({status:"error"})}))})),!0;if("is-pinned"===t.type)return function(t){chrome.action.getUserSettings().then((function(e){t({pinned:e.isOnToolbar})}))}(r),!0;if("save-to-drive"===t.type)return pr(r,t,!1),!0;if("save-to-drive-fallback"===t.type)return pr(r,t,!0),!0;if("request-download"===t.type)ur(t.base64,t.title);else if("resize-window"===t.type)Ir(t.width,t.height);else{if("available-memory"===t.type)return Rr(r),!0;"extension-media-permissions"===t.type?k("chrome://settings/content/siteDetails?site=chrome-extension://"+chrome.runtime.id,!1,!0):"add-alarm-listener"===t.type&&We()}}}}}))},7717:(t,e,r)=>{var n=r(7186),o=function(t){console.log("[BGC] ".concat(t))};o("background client up."),o("connecting to SSE service...");var a=n.parse("?port=3001".slice(1)).port,i=new EventSource("http://localhost:".concat(a,"/__server_sent_events__"));i.addEventListener("open",(function(){o("SSE service connected!")}),!1),i.addEventListener("error",(function(t){0===t.target.readyState?console.error("[BGC] you need to open devServer first!"):console.error(t)}),!1),i.addEventListener("background-updated",(function(){o("received 'background-updated' event from SSE service."),o("extension will reload to reload background..."),chrome.runtime.reload()})),i.addEventListener("content-scripts-updated",(function(){o("received 'content-scripts-updated' event from SSE service."),chrome.tabs.query({},(function(t){t.forEach((function(t){chrome.tabs.sendMessage(t.id,{from:"backgroundClient",action:"reload-yourself"},(function(t){if(!chrome.runtime.lastError||t){var e=t.from,r=t.action;"contentScriptClient"===e&&"yes-sir"===r&&(i.close(),o("extension will reload to update content scripts..."),chrome.runtime.reload())}}))}))}))}),!1)}},(function(t){t.h=()=>"077efd06f44624c30b42"}));
//# sourceMappingURL=471.95991d63f966deff2c1e.hot-update.js.map